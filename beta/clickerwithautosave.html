<!DOCTYPE html>
<html>
	<head>
		<title> Quick clicker </title>
		<meta name="description" content="A clicker programmed in javascript and html">
	</head>
		<body>
		<h1> Quick Clicker 4</h1>
		<img src="https://i.imgur.com/H88TRen.png" style="width: 117px; height: 116px;">
		<br>
		<tt> Messages: </tt>
		<tt id="log"></tt>
		<br>
		<tt> (spendable) Clicks: </tt>
		<tt id="demo"></tt>
		<br>
		<tt> Total clicks: </tt>
		<tt id="totalc"></tt>
		<br>
		<tt> Upgrades: </tt>
		<tt id="demo2"></tt>
		<br>
		<button onclick="myFunction()">Click</button>
		<br>
		<button onclick="Upgrade()">Click to upgrade</button>
		<br>
		<br>
		<br>
		<br>
		<br>
		<button onclick="Save()">Save</button>

		<script>
var count = 0;
var spendable = 0;
var upgrade = 0;
var upgrades = 0;
var counting = 0;
var save = 0;
document.getElementById("demo").innerHTML = spendable;
document.getElementById("totalc").innerHTML = count;
document.getElementById("demo2").innerHTML = upgrades;
function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
let x = 0;
x = getCookie("saved")
if (x === 1) {
//check if it is say save not found
alert("No save was found for this account, this might be because the browser was closed =( press 'ok' to make a new save!")
document.cookie = "clicks=0;"; 
document.cookie = "spendclicks=0;"; 
document.cookie = "upgrades=0;"; 
document.cookie = "saved=0;"; 

}
else {
	alert("save found! Loading save!");
	
	console.log("setting: SPENDABLE=")
	console.log(getCookie("spendclicks"));
	spendable = getCookie("spendclicks");
	
	console.log("setting: CLICKSCOUNT=");
	console.log(getCookie("clicks"));
	count = getCookie("clicks");
	
	console.log("setting: upgrades=");
	console.log(getCookie("upgrades"));
	upgrades = getCookie("upgrades");
	saved = 1;
	console.log("DONE LOADING SAVE!")
}
//document.cookie = "login=admin"; to log
/* 
CREDIT TO https://www.w3schools.com/js/js_cookies.asp and https://developer.mozilla.org/en-US/docs/web/api/document/cookie
---------
With JavaScript, a cookie can be created like this:

document.cookie = "username=John Doe";
You can also add an expiry date (in UTC time). By default, the cookie is deleted when the browser is closed:

document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";
With a path parameter, you can tell the browser what path the cookie belongs to. By default, the cookie belongs to the current page.

document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/"; 
---------
*/
//let x = document.cookie; to get cookies =D
//0 off 1 on
function myFunction() {
  console.log(count)
    if (upgrades == 0){
    count++;
    spendable++;
    console.log("SYS: clicked")
    console.log(count)
    document.getElementById("demo2").innerHTML = upgrades;    
  }
  else if (upgrades == 1) {
    count++;
    count++;
    spendable++;
    spendable++;
    document.getElementById("demo2").innerHTML = upgrades;
  }
  document.getElementById("demo").innerHTML = spendable;
  document.getElementById("totalc").innerHTML = count;
  document.getElementById("demo2").innerHTML = upgrades;

}
function Upgrade() {
	document.getElementById("log").innerHTML = "Upgrade triggered";
	if (spendable > 50) {
	spendable = spendable - 50;
        document.getElementById("demo").innerHTML = spendable;
        document.getElementById("log").innerHTML = "Removed 50 from spendable clicks for: UPGRADE";
	console.log("SYS: UPGRADE")
    	upgrades++;
    	console.log("SYS: success")
	document.cookie = "upgrades=1;"; 
    }
}  
function Save() {
	document.cookie = "upgrades=" + upgrades;
	document.cookie = "spendclicks=" + spendable;
	document.cookie = "clicks=" + count;
	document.getElementById("log").innerHTML = "Saved! Remember, this cookie will delete when you close the browser!";
}  
		</script>
<script>
</script>
	</body>


</html>
