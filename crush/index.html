<!DOCTYPE html>
<title> Find BPC crushes</title>
  <p> Data not up to date, last updated </p> <br>
  <p>response: </p>
  <p id="reply"> </p>

<input type="text" id="query"></input>
  <button onclick="lookup()">look up!</button>
<!-- set data from last updated - curdate -->
<script>
function lookup(){
let search = document.getElementById("query").value;
console.log(search, ". searching")
var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
//      document.getElementById("reply").innerHTML =
//      this.responseText;
      let a = this.responseText;
//      let b1 = a.split("\n") 
      let b = a.split("|")
      console.log(b)
      console.log(a)
      
      //start proccessing
      let i = 0;
      let c = ""
      while(c !== search){
        //change as we add more numbers, the 50 is the timeout
        i++;
        c = b[i];
        console.log(c)
      }
      c = b[i + 1]
      console.log("c new", c)
      console.log("a", a)
      document.getElementById("reply").innerHTML =
      "for the search query: ", a, "we found (number of people with known crushes on you (as of last update)): ", c;

    }
  };
  xhttp.open("GET", "crush.txt", true);
  xhttp.send();
}

</script>
